import{_ as w,P as x,B as A,g as d,r as a,o as u,f as m,w as s,a as t,c as I,b as V,F as S,d as B}from"./index.42256f7a.js";const T={name:"App",components:{Product:x},data(){var e;return{API_IMAGE:"http://195.15.226.172:7585",selectedCategorie:(e=this.$route.params)==null?void 0:e.category,page:1,pages:1,products:[],categories:[]}},watch:{selectedCategorie(){this.page=1,this.fetchProducts()}},computed:{breadcrumbs(){var o;const e=[{text:"Accueil",disabled:!1,to:{name:"home"}}];if(this.$route.params){console.log("this.selectedCategorie",this.selectedCategorie);const c=(o=this.selectedCategorie)!=null&&o.name?this.selectedCategorie.name:this.selectedCategorie;console.log("selectCat",c),e.push({text:c,disabled:!0,to:{name:"category",params:{category:c}}})}return e}},async created(){const e=A();await e.fetchCategories(),this.categories=e.categories.categories;const o=this.$route.params.category,c=this.categories.find(p=>p.name===o)._id;await d().fetchProducts(null,c),this.products=d().products.products,console.log("this.products",this.products),this.pages=d().products.pages},methods:{async addToCart(e){console.log("product",e),await d().addToCart(e)},async fetchProducts(e){var c;e&&(this.page=e);const o=d();await o.fetchProducts(this.page,((c=this.selectedCategorie)==null?void 0:c._id)||""),this.products=o.products.products,this.pages=Math.ceil(o.products.totalItems/9)||1,window.scrollTo(0,0)}}},k=B("h2",{class:"headline mb-0"},"Filtrer par cat\xE9gorie",-1);function E(e,o,c,p,r,_){const g=a("v-breadcrumbs"),n=a("v-col"),i=a("v-row"),h=a("v-card-title"),f=a("v-select"),v=a("v-card-text"),C=a("v-card"),b=a("Product"),P=a("v-pagination"),y=a("v-container");return u(),m(y,null,{default:s(()=>[t(i,null,{default:s(()=>[t(n,{cols:"12"},{default:s(()=>[t(g,{items:_.breadcrumbs},null,8,["items"])]),_:1})]),_:1}),t(i,null,{default:s(()=>[t(n,{cols:"6"},{default:s(()=>[t(C,null,{default:s(()=>[t(h,null,{default:s(()=>[k]),_:1}),t(v,null,{default:s(()=>[t(f,{modelValue:r.selectedCategorie,"onUpdate:modelValue":o[0]||(o[0]=l=>r.selectedCategorie=l),items:r.categories,"item-title":"name","item-value":"_id",label:"Categories","return-object":""},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),t(n,{cols:"12",md:"12"},{default:s(()=>[t(i,null,{default:s(()=>[(u(!0),I(S,null,V(r.products,l=>(u(),m(n,{key:l._id,cols:"12",sm:"6",md:"4"},{default:s(()=>[t(b,{product:l,btnText:l.isSold?"Vendu":"Ajouter au panier"},null,8,["product","btnText"])]),_:2},1024))),128))]),_:1}),t(i,null,{default:s(()=>[t(n,{cols:"12"},{default:s(()=>[t(P,{modelValue:r.page,"onUpdate:modelValue":o[1]||(o[1]=l=>r.page=l),length:r.pages,"total-visible":5,onInput:_.fetchProducts,circle:"",color:"primary"},null,8,["modelValue","length","onInput"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const F=w(T,[["render",E]]);export{F as default};
